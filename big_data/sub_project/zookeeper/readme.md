# zookeeper

分布式协调

## 一、简介

文章 ： http://cailin.iteye.com/blog/2014486

### 1、作用

- 同步服务
- 配置维护 配置文件
- 命名服务 Name Service (命名规则)
- 共享锁

### 2、使用场景

#### 2.1、配置管理

集中式的配置管理在应用集群中是非常常见的，一般商业公司内部都会实现一套集中的配置管理中心，应对不同的应用集群对于共享各自配置的需求，并且在配置变更时能够通知到集群中的每一个机器。

#### 2.2、集群管理

应用集群中，我们常常需要让每一个机器知道集群中（或依赖的其他某一个集群）哪些机器是活着的，并且在集群机器因为宕机，网络断链等原因能够不在人工介入的情况下迅速通知到每一个机器。

另外有一个应用场景就是集群选master,一旦master挂掉能够马上能从slave中选出一个master,实现步骤和前者一样，只是机器在启动的时候在APP1SERVERS创建的节点类型变为EPHEMERAL_SEQUENTIAL类型，这样每个节点会自动被编号


## 二、结构


### 1、Leader 领导

领导者负责进行投票的发起和决议，更新系统状态

### 2、Learner 学习者

#### 2.1、Follower 跟随者

Follower 用于接收客户端请求并向客户端返回结果，在选举过程中参与投票

#### 2.2、ObServer 观察者

ObServer 接收客户端连接，将写请求转发给 Leader 节点。但 ObServer 不参与投票过程，只同步 Leader 的状态。

ObServer 的目的是为了扩展系统，提高读取速度

注：
observer 流程和 Follower 的唯一不同的地方就是 observer 不会参加 leader 发起的投票。

### 3、Client 客户端
请求发起方
