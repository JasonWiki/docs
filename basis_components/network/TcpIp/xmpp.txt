http://www.cnblogs.com/hanyonglu/archive/2012/03/04/2378956.html
http://blog.163.com/guomaolin_gavin/blog/static/19961830720125261015351/
http://wenku.baidu.com/view/89e3418ccc22bcd126ff0c09.html

http://blog.csdn.net/shimiso/article/details/8156439		//androidpn-xmpp服务器

1. 什么是XMPP ？
XMPP的前身是Jabber，一个开源形式组织产生的网络即时通信协议。
XMPP目前被IETF国际标准组织完成了标准化工作。
标准化的核心结果分为两部分； 
核心的XML流传输协议 基于XML流传输的即时通讯扩展应用 XMPP的核心XML流传输协议的定义使得XMPP能够在一个比以往网络通信协议更规范的平台上。借助于XML易于解析和阅读的特性，使得XMPP的协议能够非常漂亮。 XMPP的即时通讯扩展应用部分是根据IETF在这之前对即时通讯的一个抽象定义的，与其他业已得到广泛使用的即时通讯协议，诸如AIM，QQ等有功能完整，完善等先进性。


2. XMPP的基本网络结构是怎样的？
XMPP中定义了三个角色，客户端，服务器，网关。通信能够在这三者的任意两个之间双向发生。
服务器同时承担了客户端信息记录，连接管理和信息的路由功能。
网关承担着与异构即时通信系统的互联互通，异构系统可以包括SMS（短信），MSN，ICQ等。
基本的网络形式是单客户端通过TCP/IP连接到单服务器，然后在之上传输XML。

3. XMPP通过TCP传什么了？
传输的是与即时通讯相关的指令。
在以前这些命令要么用2进制的形式发送（比如QQ），要么用纯文本指令加空格加参数加换行苻的方式发送（比如MSN）。
而XMPP传输的即时通讯指令的逻辑与以往相仿，只是协议的形式变成了XML格式的纯文本。这不但使得解析容易了，人也容易阅读了，方便了开发和查错。
而XMPP的核心部分就是一个在网络上分片断发送XML的流协议。
这个流协议是XMPP的即时通讯指令的传递基础，也是一个非常重要的可以被进一步利用的网络基础协议。
所以可以说，XMPP用TCP传的是XML流。



工作原理：
XMPP的服务器，内核是一个XMPP路由器
1、会话	管理器：负责客户端的会话认证、在线状态、用户联系表
2、数据存储器：连接数据库、保持用户信息、通信日志
3、连接管理器：服务器与客户端之间的连接
4、服务器连接器：管理xmpp服务器之间的连接
5、传输器：建立xmpp服务器与非xmpp服务器通信


工作原理：
1、客户端连接到服务器
2、server利用本地证书对连接进行认证
3、客户端指定目标地址，让server告知目标状态
4、server查找、连接并进行相互认证
5、客户端进行交互。


JID格式：admin@192.168.1.102/设备号

<stream……> 表示建立会话

…………

…………

</stream>







